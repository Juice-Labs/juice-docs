"use strict";(self.webpackChunkjuice_docs=self.webpackChunkjuice_docs||[]).push([[7238],{6430:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>a,contentTitle:()=>s,default:()=>d,frontMatter:()=>c,metadata:()=>t,toc:()=>l});const t=JSON.parse('{"id":"juice/user-guide/docker/docker-client","title":"Client in Docker","description":"You can run the Juice client within a Docker container to leverage remote GPUs without installing the entire agent on your host machine.","source":"@site/docs/juice/user-guide/docker/docker-client.md","sourceDirName":"juice/user-guide/docker","slug":"/juice/user-guide/docker/docker-client","permalink":"/juice-docs/docs/juice/user-guide/docker/docker-client","draft":false,"unlisted":false,"editUrl":"https://github.com/juice-labs/juice-docs/edit/master/docs/juice/user-guide/docker/docker-client.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"title":"Client in Docker","sidebar_position":1},"sidebar":"tutorialSidebar","previous":{"title":"Example Workloads","permalink":"/juice-docs/docs/juice/user-guide/performance-latency/example-workloads"},"next":{"title":"Agent in Docker","permalink":"/juice-docs/docs/juice/user-guide/docker/docker-agent"}}');var r=i(4848),o=i(8453);const c={title:"Client in Docker",sidebar_position:1},s="Client in Docker",a={},l=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"Creating the Docker image:",id:"creating-the-docker-image",level:2},{value:"Example",id:"example",level:4},{value:"Running the Docker container",id:"running-the-docker-container",level:2},{value:"Example",id:"example-1",level:4}];function u(e){const n={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",h4:"h4",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"client-in-docker",children:"Client in Docker"})}),"\n",(0,r.jsx)(n.p,{children:"You can run the Juice client within a Docker container to leverage remote GPUs without installing the entire agent on your host machine."}),"\n",(0,r.jsx)(n.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Docker"}),": Ensure you have Docker installed and running on your system."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Active Account"}),": You'll need an active Juice account and access to a pool with available GPUs."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"M2M Token"}),": Generate an M2M token from your juice account to enable automated login within the container.",(0,r.jsx)("br",{}),"See the ",(0,r.jsx)(n.a,{href:"/juice-docs/docs/juice/user-guide/cli-app/m2m-tokens",children:"Machine-to-Machine (M2M) Tokens"})," section of the Juice (Pro) User Guide for instructions."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Juice Tarball"}),": Download the latest juice Linux tarball from ",(0,r.jsx)(n.a,{href:"https://app.juicelabs.co",children:"app.juicelabs.co"})]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"creating-the-docker-image",children:"Creating the Docker image:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Create a Dockerfile in your working directory."}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"example",children:"Example"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-powershell",children:'# Use Ubuntu 24.04 as the base image \nFROM ubuntu:24.04 \n\n# Install necessary packages \nRUN apt-get update && \\ \n    apt-get upgrade -y && \\ \n    DEBIAN_FRONTEND=noninteractive apt-get install -y \\ \n    ca-certificates \\ \n    libnuma1 \\ \n    libatomic1 && \\ \n    rm -rf /var/lib/apt/lists/* \n\n# Set working directory inside the container \nWORKDIR /home/ubuntu \n\n# Copy the juice tarball and the run script \nADD juice-gpu-linux.tar.gz /home/ubuntu\nCOPY --chown=ubuntu:ubuntu --chmod=777 run.sh . \n\n# Define the entry point for the container \nENTRYPOINT ["/bin/bash", "-c", "/root/run.sh ${@}", "--"] \n'})}),"\n",(0,r.jsxs)(n.ol,{start:"2",children:["\n",(0,r.jsx)(n.li,{children:"Create a file named run.sh in the same directory as your Dockerfile with the following contents:"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-powershell",children:'#!/bin/bash \n# Check if at least one argument is provided (M2M token) \nif [ $# -eq 0 ]; then \n    echo "Usage: $0 <m2m_token> [run_args...]" \n    exit 1 \nfi \n\n# The first argument is the M2M token \nm2m_token="$1" \n\n# Shift the arguments to remove the M2M token \nshift \n\n# Log in to juice using the M2M token \n./juice login --token "$m2m_token" \n\n# Execute the juice run command with the remaining arguments \n./juice run "$@" \n'})}),"\n",(0,r.jsxs)(n.ol,{start:"3",children:["\n",(0,r.jsx)(n.li,{children:"Open a terminal, navigate to the directory containing your Dockerfile, run.sh, and execute the following command:"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-powershell",children:"docker build -t juice-client . \n"})}),"\n",(0,r.jsxs)(n.p,{children:["This builds a Docker image tagged ",(0,r.jsx)(n.em,{children:"juice-client"})," using the instructions in your Dockerfile."]}),"\n",(0,r.jsx)(n.h2,{id:"running-the-docker-container",children:"Running the Docker container"}),"\n",(0,r.jsx)(n.p,{children:"Once the image is built, you can run a container using your M2M token and desired juice run arguments:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-powershell",children:"docker run -it juice-client <your_m2m_token> <juice_run_args>\n"})}),"\n",(0,r.jsx)(n.h4,{id:"example-1",children:"Example"}),"\n",(0,r.jsx)(n.p,{children:"This command launches an interactive container, logs in using your M2M token, and executes the bash command inside the container. You can replace bash with any other juice command or application you want to run remotely."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-powershell",children:"docker run -it juice-client m2m_e6q_87LwpLY1dwh4FpX --pool-ids <your_pool_id> bash  \n"})}),"\n",(0,r.jsxs)(n.p,{children:["Applications and commands executed within the container utilize the remote GPU resources provided by juice. Refer to the ",(0,r.jsx)(n.a,{href:"/docs/juice/user-guide/cli-app",children:"User Guide"})," for detailed information about available commands, options, and troubleshooting."]})]})}function d(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(u,{...e})}):u(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>c,x:()=>s});var t=i(6540);const r={},o=t.createContext(r);function c(e){const n=t.useContext(o);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:c(e.components),t.createElement(o.Provider,{value:n},e.children)}}}]);